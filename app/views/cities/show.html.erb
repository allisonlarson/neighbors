<div class="col-md-2">
  <div class="list-group" id='sidebar-padding'>
    <% @filters.each do |filter| %>
      <%= link_to filter.name, neighborhood_path(filter), class:'btn list-group-item sidebar-button' %>
    <% end %>
  </div>
</div>
<div class="col-md-8">
  <div id="map-canvas" style="height: 500px; width: 1020px;">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>

    <script>
     var map;
     function initialize() {
       var mapOptions = {
         zoom: 13,
         center: new google.maps.LatLng(<%=@area.coordinates.first.lat%>, <%=@area.coordinates.first.lon%>)
       };
       map = new google.maps.Map(document.getElementById('map-canvas'),
           mapOptions);
           var i = 1;
       <% @area.neighborhoods.each do |n|%>

        var neighborhoodCoords = [
          <% n.coordinates.each do |coord| %>
            new google.maps.LatLng(<%=coord.lat%>, <%=coord.lon%>),
          <%end%>
        ];

        var neighborhood = new google.maps.Polygon({
          paths: neighborhoodCoords,
          strokeColor: '#919191',
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: '#CFCFCF',
          fillOpacity: 0.5,
          clickable:true,
        });

          neighborhood.setMap(map);
          google.maps.event.addListener(neighborhood, "click", function() { window.location.href= '/neighborhoods/'+"<%=n.id%>" })
          i++;
          <%end%>
     }


    google.maps.event.addDomListener(window, 'load', initialize);
     </script>
  </div>
</div>
